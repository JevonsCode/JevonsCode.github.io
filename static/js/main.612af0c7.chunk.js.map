{"version":3,"sources":["source/white.png","examples/demos-advanced/starWarp/index.jsx","index.js"],"names":["module","exports","react","require","CacheAsBitmap","app","PIXI","canvas","HTMLDivElement","this","width","window","innerWidth","height","innerHeight","transparent","appendChild","view","stage","starTexture","from","cameraZ","speed","warpSpeed","stars","i","star","sprite","z","x","y","randomizeStar","addChild","push","initial","Math","random","deg","PI","distance","cos","sin","setInterval","ticker","add","delta","renderer","screen","dxCenter","dyCenter","distanceCenter","sqrt","distanceScale","max","scale","rotation","atan2","ref","e","Component","ReactDOM","render","document","getElementById"],"mappings":"oIAAAA,EAAOC,QAAU,80G,2HCKXC,EAAQC,EAAQ,IAEDC,E,2MACjBC,IAAMC,I,EACNC,OAASC,e,mFAEY,IAAD,OAEhBC,KAAKJ,IAAM,IAAIC,IAAiB,CAAEI,MAAOC,OAAOC,WAAYC,OAAQF,OAAOG,YAAaC,aAAa,IAErGN,KAAKF,OAAOS,YAAYP,KAAKJ,IAAIY,MACfR,KAAKJ,IAAfa,MAuBR,IA5BgB,IAcVC,EAAcb,IAAac,KAAKlB,GAGlCmB,EAAU,EAGVC,EAAQ,EACRC,EAAY,EAMVC,EAAQ,GACLC,EAAI,EAAGA,EAZG,IAYaA,IAAK,CACjC,IAAMC,EAAO,CACTC,OAAQ,IAAIrB,IAAYa,GACxBS,EAAG,EACHC,EAAG,EACHC,EAAG,GAKPC,EAAcL,GAAM,GACpBjB,KAAKJ,IAAIa,MAAMc,SAASN,EAAKC,QAC7BH,EAAMS,KAAKP,GAGf,SAASK,EAAcL,EAAMQ,GACzBR,EAAKE,EAAIM,EAA0B,IAAhBC,KAAKC,SAAkBf,EAA0B,IAAhBc,KAAKC,SAAkB,IAG3E,IAAMC,EAAMF,KAAKC,SAAWD,KAAKG,GAAK,EAChCC,EAA2B,GAAhBJ,KAAKC,SAAgB,EACtCV,EAAKG,EAAIM,KAAKK,IAAIH,GAAOE,EACzBb,EAAKI,EAAIK,KAAKM,IAAIJ,GAAOE,EAI7BG,aAAY,WACRnB,EAAYA,EAAY,EAAI,EAAI,IACjC,KAGHd,KAAKJ,IAAIsC,OAAOC,KAAI,SAACC,GAGjBxB,GAAmB,GAARwB,IADXvB,IAAUC,EAAYD,GAAS,IA1CjB,MA4Cd,IAAK,IAAIG,EAAI,EAAGA,EA/CD,IA+CiBA,IAAK,CACjC,IAAMC,EAAOF,EAAMC,GACfC,EAAKE,EAAIP,GAASU,EAAcL,GAGpC,IAAME,EAAIF,EAAKE,EAAIP,EACnBK,EAAKC,OAAOE,EAAIH,EAAKG,GAnDjB,GAmD4BD,GAAK,EAAKvB,IAAIyC,SAASC,OAAOrC,MAAQ,EAAKL,IAAIyC,SAASC,OAAOrC,MAAQ,EACvGgB,EAAKC,OAAOG,EAAIJ,EAAKI,GApDjB,GAoD4BF,GAAK,EAAKvB,IAAIyC,SAASC,OAAOrC,MAAQ,EAAKL,IAAIyC,SAASC,OAAOlC,OAAS,EAGxG,IAAMmC,EAAWtB,EAAKC,OAAOE,EAAI,EAAKxB,IAAIyC,SAASC,OAAOrC,MAAQ,EAC5DuC,EAAWvB,EAAKC,OAAOG,EAAI,EAAKzB,IAAIyC,SAASC,OAAOlC,OAAS,EAC7DqC,EAAiBf,KAAKgB,KAAKH,EAAWA,EAAWC,EAAWA,GAC5DG,EAAgBjB,KAAKkB,IAAI,GAAI,IAAOzB,GAAK,KAC/CF,EAAKC,OAAO2B,MAAMzB,EAtDL,IAsDSuB,EAGtB1B,EAAKC,OAAO2B,MAAMxB,EAzDL,IAyDSsB,EAA+BA,EAAgB9B,EA1DzD,EA0D+E4B,EAAiB,EAAK7C,IAAIyC,SAASC,OAAOrC,MACrIgB,EAAKC,OAAO4B,SAAWpB,KAAKqB,MAAMP,EAAUD,GAAYb,KAAKG,GAAK,Q,+BAMpE,IAAD,OAEL,OACI,yBAAKmB,IAAK,SAACC,GAAQ,EAAKnD,OAASmD,S,GA9FFC,aCH3CC,IAASC,OAAO,kBAAC,EAAD,MAAaC,SAASC,eAAe,W","file":"static/js/main.612af0c7.chunk.js","sourcesContent":["module.exports = \"data:image/png;base64,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\"","/**\n * 时空穿梭\n */\nimport React, { Component } from 'react';\nimport * as PIXI from 'pixi.js';\nconst react = require(\"../../../source/white.png\");\n\nexport default class CacheAsBitmap extends Component {\n    app = PIXI.Application;\n    canvas = HTMLDivElement;\n\n    componentDidMount() {\n        // 创建一个 canvas stage\n        this.app = new PIXI.Application({ width: window.innerWidth, height: window.innerHeight, transparent: false });\n        // 把这个 stage 挂载到元素上\n        this.canvas.appendChild(this.app.view);\n        const { stage } = this.app;\n\n        // Get the texture for rope.\n        /**\n         * 纹理存储代表图像或图像一部分的信息。\n         * 不能直接将其添加到显示列表中。而是将其用作Sprite的纹理。如果没有为纹理提供框架，则使用整个图像。\n         */\n\n        // const starTexture = PIXI.RenderTexture.create(30, 30);\n        const starTexture = PIXI.Texture.from(react);\n\n        const starAmount = 1000;\n        let cameraZ = 0;\n        const fov = 20;\n        const baseSpeed = 0.025;\n        let speed = 0;\n        let warpSpeed = 0;\n        const starStretch = 5;\n        const starBaseSize = 0.05;\n\n\n        // Create the stars\n        const stars = [];\n        for (let i = 0; i < starAmount; i++) {\n            const star = {\n                sprite: new PIXI.Sprite(starTexture),\n                z: 0,\n                x: 0,\n                y: 0,\n            };\n            // console.log(star)\n            // star.sprite.anchor.x = 0.5;\n            // star.sprite.anchor.y = 0.7;\n            randomizeStar(star, true);\n            this.app.stage.addChild(star.sprite);\n            stars.push(star);\n        }\n\n        function randomizeStar(star, initial) {\n            star.z = initial ? Math.random() * 2000 : cameraZ + Math.random() * 1000 + 2000;\n\n            // Calculate star positions with radial random coordinate so no star hits the camera.\n            const deg = Math.random() * Math.PI * 2;\n            const distance = Math.random() * 50 + 1;\n            star.x = Math.cos(deg) * distance;\n            star.y = Math.sin(deg) * distance;\n        }\n\n        // Change flight speed every 5 seconds\n        setInterval(() => {\n            warpSpeed = warpSpeed > 0 ? 0 : 1;\n        }, 5000);\n\n        // Listen for animate update\n        this.app.ticker.add((delta) => {\n            // Simple easing. This should be changed to proper easing function when used for real.\n            speed += (warpSpeed - speed) / 20;\n            cameraZ += delta * 10 * (speed + baseSpeed);\n            for (let i = 0; i < starAmount; i++) {\n                const star = stars[i];\n                if (star.z < cameraZ) randomizeStar(star);\n\n                // Map star 3d position to 2d with really simple projection\n                const z = star.z - cameraZ;\n                star.sprite.x = star.x * (fov / z) * this.app.renderer.screen.width + this.app.renderer.screen.width / 2;\n                star.sprite.y = star.y * (fov / z) * this.app.renderer.screen.width + this.app.renderer.screen.height / 2;\n\n                // Calculate star scale & rotation.\n                const dxCenter = star.sprite.x - this.app.renderer.screen.width / 2;\n                const dyCenter = star.sprite.y - this.app.renderer.screen.height / 2;\n                const distanceCenter = Math.sqrt(dxCenter * dxCenter + dyCenter + dyCenter);\n                const distanceScale = Math.max(0, (2000 - z) / 2000);\n                star.sprite.scale.x = distanceScale * starBaseSize;\n                // Star is looking towards center so that y axis is towards center.\n                // Scale the star depending on how fast we are moving, what the stretchfactor is and depending on how far away it is from the center.\n                star.sprite.scale.y = distanceScale * starBaseSize + distanceScale * speed * starStretch * distanceCenter / this.app.renderer.screen.width;\n                star.sprite.rotation = Math.atan2(dyCenter, dxCenter) + Math.PI / 2;\n            }\n        });\n        \n    }\n\n    render() {\n        // 用 React 的 ref 将 Pixi 实现\n        return (\n            <div ref={(e) => { this.canvas = e }} />\n        );\n    }\n}","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport PixiApp from './examples/demos-advanced/starWarp';\n\nReactDOM.render(<PixiApp />, document.getElementById('root'));"],"sourceRoot":""}